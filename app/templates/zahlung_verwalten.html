<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Zahlungsstatus verwalten</title>
</head>
<body>
    <h1>Zahlungsstatus verwalten</h1>

    <form method="GET">
        <label for="event_id">Event wählen:</label>
        <select name="event_id" id="event_id" onchange="this.form.submit()">
            <option value="">-- wählen --</option>
            {% for event in events %}
                <option value="{{ event.id }}" {% if selected_event_id == event.id %}selected{% endif %}>
                    {{ event.name }} – {{ event.datum }}
                </option>
            {% endfor %}
        </select>
    </form>

    {% if teilnehmer_events %}
    <form method="POST">
        <table>
            <tr>
                <th>Teilnehmer</th>
                <th>Status</th>
            </tr>
            {% for te in teilnehmer_events %}
            <tr>
                <td>{{ te.teilnehmer.name }}</td>
                <td>
                    <select name="status_{{ te.id }}">
                        {% for status in ['offen', 'twint', 'cash', 'schulden'] %}
                            <option value="{{ status }}" {% if te.bezahlt_status == status %}selected{% endif %}>{{ status.capitalize() }}</option>
                        {% endfor %}
                    </select>
                </td>
            </tr>
            {% endfor %}
        </table>
        <br>
        <input type="submit" value="Speichern">
    </form>
    {% endif %}

    <br><a href="{{ url_for('index') }}">Zurück zur Startseite</a>
</body>
</html>
